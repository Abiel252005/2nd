<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Happy Anniversary Card</title>
  <link rel="stylesheet" href="./style.css">
</head>
<body>
  <div class="card">
    <div class="imgBox">
      <div class="bark"></div>
      <img src="https://artinmindstudio.com/wp-content/uploads/2020/01/Snoopy-Love.jpg" alt="Snoopy Love">
    </div>
    <div class="details">
      <h4 class="color1">¡Otro Mes Juntos!</h4>
      <h4 class="color2 margin">¡FELIZ ANIVERSARIO!</h4>
      <p>Mi amor, cada mes contigo es un tesoro que guardo en mi corazón.</p>
      <p>Cada momento contigo es especial y lo amo demasiado, te amo a ti.</p>
      <p>Gracias por llenar mi vida de risas, amor y momentos inolvidables.</p>
      <p>Estoy tan feliz por tenerte como mi compañera de vida.</p>
      <p>Sigamos celebrando muchos más meses y años juntos, siempre enamorados.</p>
      <p>Te amo con toda mi alma.</p>
      <p class="text-right">¡Feliz Aniversario!</p>
      <p class="text-right">Con mucho amor Abiel ♥</p>
    </div>
  </div>
  <audio id="anniversaryAudio" loop>
    <source src="/congratulations.mp3" type="audio/mpeg">
    Tu navegador no soporta el elemento de audio. Haz clic <a href="/congratulations.mp3">aquí</a> para descargar la canción.
  </audio>
  <script>
    const card = document.querySelector('.card');
    const audio = document.getElementById('anniversaryAudio');
    let isOpen = false;

    // Función para reproducir audio (maneja errores de autoplay)
    function playAudio() {
      audio.play().catch(error => {
        console.log('Autoplay blocked:', error);
      });
    }

    // Evento para celular (clic abre y reproduce)
    if (window.innerWidth <= 550) {
      card.addEventListener('click', () => {
        isOpen = !isOpen;
        const imgBox = card.querySelector('.imgBox');
        const bark = card.querySelector('.bark');
        if (isOpen) {
          imgBox.style.transform = 'rotateY(-90deg)';
          bark.style.opacity = '1';
          bark.style.boxShadow = '350px 200px 80px rgba(0, 0, 0, .3) inset';
          playAudio(); // Reproduce audio al abrir
        } else {
          imgBox.style.transform = 'rotateY(0deg)';
          bark.style.opacity = '0';
          bark.style.boxShadow = 'none';
          audio.pause(); // Pausa audio al cerrar
          audio.currentTime = 0; // Reinicia el audio
        }
      });
    } else {
      // Evento para laptop (mouseover reproduce, mouseout pausa)
      card.addEventListener('mouseover', () => {
        playAudio(); // Reproduce al pasar el mouse
      });
      card.addEventListener('mouseout', () => {
        audio.pause(); // Pausa al salir el mouse
        audio.currentTime = 0; // Reinicia el audio
      });
    }
  </script>
</body>
</html>